<section class="business-profile">
  <!-- תאריך ושעה בפינה השמאלית העליונה -->
  <div class="datetime">
    {{ formatDateTime(currentTime) }}
  </div>

  <!-- כותרת ראשית -->
  <div class="hero">
    <div class="hero-content">
      <div class="business-name-header">
        <h1 *ngIf="!error">👋 שלום, הגעתם לעסק {{ businessName }}</h1>
        <button 
          *ngIf="isOwner" 
          class="edit-business-btn" 
          (click)="openEditBusinessModal()"
          title="ערוך פרטי עסק"
        >
          ✏️ ערוך פרטים
        </button>
      </div>
      <div class="description-section">
        <p>{{ business?.description || 'ברוכים הבאים! כאן תמצאו את השירותים המובילים שלנו, הכירו את הצוות המקצועי שלנו וקראו מה לקוחות מרוצים חושבים עלינו.' }}</p>
        <button 
          *ngIf="isOwner" 
          class="edit-description-btn" 
          (click)="openDescriptionModal()"
          title="ערוך תיאור"
        >
          ✏️
        </button>
      </div>
    </div>
    <div class="hero-image">
      <img
        *ngIf="logoUrl"
        [src]="sanitizeUrl(logoUrl)"
        [alt]="businessName"
        (error)="onImageError($event)"
      />
      <div *ngIf="!logoUrl" class="no-logo">
        <div>🏢</div>
        <div>אין לוגו</div>
      </div>
    </div>
  </div>

  <!-- טבלת עובדים - מוצגת רק לבעל העסק -->
  <div class="section" *ngIf="!error && isOwner">
    <div class="employees-header">
      <h2>הצוות שלנו</h2>
      <button
        *ngIf="isOwner"
        class="add-employee-btn"
        (click)="openEmployeeModal()"
      >
        <span>+</span>
      </button>
    </div>
    <table
      class="employees-table"
      *ngIf="employees.length > 0; else noEmployees"
    >
      <thead>
        <tr>
          <th>שם</th>
          <th>תפקיד</th>
          <th>טלפון</th>
          <th>חופשות</th>
          <th>פעולות</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let employee of employees">
          <td>{{ employee.name }}</td>
          <td>{{ employee.role }}</td>
          <td>{{ employee.phone }}</td>
          <td>
            <button 
              class="absence-btn" 
              (click)="openAbsenceModal(employee)"
              title="נהל חופשות"
            >
              🏖️ {{ getEmployeeAbsencesCount(employee.id) }}
            </button>
          </td>
          <td>
            <div class="table-actions">
              <button class="edit-btn-small" (click)="editEmployee(employee)" title="ערוך">
                ✏️
              </button>
              <button class="delete-btn-small" (click)="deleteEmployee(employee)" title="מחק">
                🗑️
              </button>
            </div>
          </td>
        </tr>
      </tbody>
    </table>
    <ng-template #noEmployees>
      <p>אין עובדים רשומים.</p>
    </ng-template>
  </div>

  <!-- כרטיסי שירותים -->
  <div class="section" *ngIf="!error">
    <div class="services-header">
      <h2>השירותים שלנו</h2>
      <button
        *ngIf="isOwner"
        class="add-service-btn"
        (click)="openServiceModal()"
      >
        <span>+</span>
      </button>
    </div>
    <div class="services-grid" *ngIf="services.length > 0; else noServices">
      <div class="service-card" *ngFor="let service of services">
        <div class="service-image">
          <img 
            *ngIf="service.imageUrl" 
            [src]="service.imageUrl" 
            [alt]="service.name"
            (error)="onImageError($event)"
          />
        </div>
        <h3>{{ service.name }}</h3>
        <p>{{ service.description || 'שירות איכותי ומקצועי' }}</p>
        <p class="price">₪{{ service.price }}</p>
        <div class="service-actions">
          <button
            *ngIf="!isOwner"
            class="book-service-btn"
            (click)="openBookingModal(service)"
          >
            📅 הזמן שירות
          </button>
          <button
            *ngIf="isOwner"
            class="edit-service-btn"
            (click)="editService(service)"
          >
            ✏️ ערוך
          </button>
          <button
            *ngIf="isOwner"
            class="delete-service-btn"
            (click)="deleteService(service)"
          >
            🗑️ מחק
          </button>
        </div>
      </div>
    </div>
    <ng-template #noServices>
      <p>אין שירותים רשומים.</p>
    </ng-template>
  </div>

  <!-- ביקורות לקוחות -->
  <div class="section" *ngIf="!error">
    <h2>ביקורות לקוחות</h2>
    <div class="reviews-grid" *ngIf="reviews.length > 0; else noReviews">
      <div class="review-card" *ngFor="let review of reviews">
        <p>{{ review.comment }}</p>
        <span>
          {{ review.customer }} - דירוג: {{ "★".repeat(review.rating)
          }}{{ "☆".repeat(5 - review.rating) }}
        </span>
      </div>
    </div>
    <ng-template #noReviews>
      <p>אין ביקורות רשומות.</p>
    </ng-template>
  </div>

  <!-- טעינה ושגיאות -->
  <div *ngIf="error" class="error-msg">{{ error }}</div>
  <div *ngIf="loading" class="loading">טוען...</div>

  <!-- מודל להוספת שירות -->
  <div
    class="modal"
    [class.active]="showServiceModal"
    (click)="closeServiceModal()"
  >
    <div
      class="modal-content"
      [class.active]="showServiceModal"
      (click)="$event.stopPropagation()"
    >
      <button class="close-modal-btn" (click)="closeServiceModal()">✕</button>
      <h3>{{ editingServiceId ? '✏️ עריכת שירות' : '✨ הוספת שירות חדש' }}</h3>
      <div class="form-slide" [class.active]="serviceFormStep === 1">
        <div class="form-row">
          <div class="form-group">
            <label>📝 שם השירות</label>
            <input type="text" [(ngModel)]="newService.name" placeholder="לדוגמה: תספורת גברים" required />
            <span class="error" *ngIf="!newService.name">שדה נדרש</span>
          </div>
        </div>

        <div class="form-group">
          <label>💬 תיאור השירות</label>
          <textarea [(ngModel)]="newService.description" placeholder="תאר את השירות..." required></textarea>
          <span class="error" *ngIf="!newService.description">שדה נדרש</span>
        </div>

        <div class="form-row">
          <div class="form-group">
            <label>💰 מחיר (₪)</label>
            <input
              type="number"
              [(ngModel)]="newService.price"
              min="0"
              placeholder="150"
              required
            />
            <span class="error" *ngIf="!newService.price || newService.price <= 0">חייב להיות גדול מ-0</span>
          </div>

          <div class="form-group">
            <label>🏷️ מחיר בהנחה (₪)</label>
            <input type="number" [(ngModel)]="newService.discountPrice" min="0" placeholder="אופציונלי" />
          </div>
        </div>

        <div class="form-row">
          <div class="form-group">
            <label>🏷️ קטגוריה</label>
            <input type="text" [(ngModel)]="newService.category" placeholder="תספורת, צביעה..." required />
            <span class="error" *ngIf="!newService.category">שדה נדרש</span>
          </div>

          <div class="form-group">
            <label>⏱️ משך (דקות)</label>
            <input
              type="number"
              [(ngModel)]="newService.duration"
              min="0"
              placeholder="30"
              required
            />
            <span class="error" *ngIf="!newService.duration || newService.duration <= 0">חייב להיות גדול מ-0</span>
          </div>
        </div>

        <div class="form-group">
          <label>📊 זמינות</label>
          <select [(ngModel)]="newService.availability" required>
            <option value="">בחר זמינות...</option>
            <option value="available">✅ זמין</option>
            <option value="unavailable">❌ לא זמין</option>
            <option value="on_request">📞 בהזמנה</option>
          </select>
          <span class="error" *ngIf="!newService.availability">שדה נדרש</span>
        </div>

        <div class="form-group">
          <label>🏷️ תגיות</label>
          <input
            type="text"
            [(ngModel)]="tagsInput"
            placeholder="מהיר, פרימיום, מבצע (מופרדות בפסיק)"
          />
        </div>

        <div class="form-group">
          <label>📷 תמונת השירות</label>
          <input type="file" accept="image/*" (change)="onServiceImageSelected($event)" />
          <div class="image-preview" *ngIf="serviceImagePreview">
            <img [src]="serviceImagePreview" alt="תצוגה מקדימה" />
          </div>
        </div>

        <div class="checkbox-group">
          <label class="checkbox-label">
            <input type="checkbox" [(ngModel)]="newService.isFeatured" />
            <span>⭐ שירות מומלץ</span>
          </label>

          <label class="checkbox-label">
            <input type="checkbox" [(ngModel)]="newService.requiresEmployee" />
            <span>👤 דורש בחירת עובד</span>
          </label>
        </div>
        <div class="form-actions">
          <button class="cancel-btn" (click)="closeServiceModal()">❌ בטל</button>
          <button
            class="save-btn"
            (click)="nextServiceStep()"
            [disabled]="!isServiceFormValid()"
          >
            {{ newService.requiresEmployee ? "➡️ הבא" : (editingServiceId ? "💾 עדכן" : "💾 שמור") }}
          </button>
        </div>
      </div>
      <div class="form-slide" [class.active]="serviceFormStep === 2">
        <div class="form-group">
          <label>👥 בחר עובדים לשירות</label>
          <p class="helper-text">בחר את העובדים שיכולים לבצע את השירות הזה</p>
          <div class="employee-scroll">
            <div *ngFor="let employee of employees" class="employee-option">
              <label class="checkbox-label employee-checkbox">
                <input
                  type="checkbox"
                  [(ngModel)]="employee.selected"
                  [ngModelOptions]="{ standalone: true }"
                />
                <span class="employee-info">
                  <span class="employee-name">{{ employee.name }}</span>
                  <span class="employee-details">{{ employee.role }} • {{ employee.phone }}</span>
                </span>
              </label>
            </div>
          </div>
          <span class="error" *ngIf="!hasSelectedEmployees()">נא לבחור לפחות עובד אחד</span>
        </div>
        <div class="form-actions">
          <button class="cancel-btn" (click)="closeServiceModal()">❌ בטל</button>
          <button
            class="save-btn"
            (click)="addNewService()"
            [disabled]="!isEmployeeFormValid()"
          >
            {{ editingServiceId ? "💾 עדכן שירות" : "💾 שמור שירות" }}
          </button>
        </div>
      </div>
    </div>
  </div>

  <!-- מודל להוספת עובד -->
  <div
    class="modal"
    [class.active]="showEmployeeModal"
    (click)="closeEmployeeModal()"
  >
    <div
      class="modal-content"
      [class.active]="showEmployeeModal"
      (click)="$event.stopPropagation()"
    >
      <button class="close-modal-btn" (click)="closeEmployeeModal()">✕</button>
      <h3>{{ editingEmployeeId ? '✏️ עריכת עובד' : '👤 הוספת עובד חדש' }}</h3>
      <div class="form-slide active">
        <div class="form-group">
          <label>👨‍💼 שם העובד</label>
          <input type="text" [(ngModel)]="newEmployee.name" placeholder="שם מלא" required />
          <span class="error" *ngIf="!newEmployee.name">שדה נדרש</span>
        </div>

        <div class="form-row">
          <div class="form-group">
            <label>💼 תפקיד</label>
            <input type="text" [(ngModel)]="newEmployee.role" placeholder="מעצב שיער, ספר..." required />
            <span class="error" *ngIf="!newEmployee.role">שדה נדרש</span>
          </div>

          <div class="form-group">
            <label>📞 טלפון</label>
            <input type="text" [(ngModel)]="newEmployee.phone" placeholder="050-1234567" required />
            <span class="error" *ngIf="!newEmployee.phone">שדה נדרש</span>
          </div>
        </div>

        <div class="form-group">
          <label>📷 תמונת העובד</label>
          <input type="file" accept="image/*" (change)="onEmployeeImageSelected($event)" />
          <div class="image-preview" *ngIf="employeeImagePreview">
            <img [src]="employeeImagePreview" alt="תצוגה מקדימה" />
          </div>
        </div>

        <div class="form-group">
          <label>✂️ שירותים</label>
          <input
            type="text"
            [(ngModel)]="newEmployee.services"
            placeholder="תספורת, צביעה, איפור (מופרדות בפסיק)"
          />
          <p class="helper-text">הזן את השירותים שהעובד יכול לבצע, מופרדים בפסיק</p>
        </div>

        <div class="form-group">
          <label>⏰ שעות עבודה</label>
          <p class="helper-text">הגדר את שעות העבודה של העובד (אופציונלי)</p>
          <div class="hours-table">
            <div *ngFor="let day of weekDays" class="hour-row">
              <label class="day-label">{{ day }}</label>
              <input 
                type="time" 
                [(ngModel)]="employeeHours[day].from" 
                placeholder="מ-"
                class="time-input"
              />
              <span class="separator">עד</span>
              <input 
                type="time" 
                [(ngModel)]="employeeHours[day].to" 
                placeholder="עד-"
                class="time-input"
              />
            </div>
          </div>
        </div>

        <div class="form-actions">
          <button class="cancel-btn" (click)="closeEmployeeModal()">❌ בטל</button>
          <button
            class="save-btn"
            (click)="addNewEmployee()"
            [disabled]="!isNewEmployeeFormValid()"
          >
            {{ editingEmployeeId ? "💾 עדכן עובד" : "💾 שמור עובד" }}
          </button>
        </div>
      </div>
    </div>
  </div>

  <!-- מודל להזמנת שירות -->
  <div
    class="modal"
    [class.active]="showBookingModal"
    (click)="closeBookingModal()"
  >
    <div
      class="modal-content"
      [class.active]="showBookingModal"
      (click)="$event.stopPropagation()"
    >
      <h3>הזמנת שירות</h3>

      <!-- שלב 1: בחירת עובד (אם נדרש) -->
      <div class="form-slide" [class.active]="bookingStep === 1">
        <div class="form-group">
          <label>שירות נבחר</label>
          <input type="text" [value]="selectedService?.name" disabled />
        </div>
        <div class="form-group" *ngIf="selectedService?.requiresEmployee">
          <label>בחר עובד</label>
          <select [(ngModel)]="selectedEmployee">
            <option [ngValue]="null" disabled>בחר עובד</option>
            <option
              *ngFor="
                let employee of employees
                  | filterEmployeesByService : selectedService?.id
              "
              [ngValue]="employee"
            >
              {{ employee.name }} - {{ employee.role }}
            </option>
          </select>
          <span class="error" *ngIf="!selectedEmployee">שדה נדרש</span>
        </div>
        <div class="form-actions">
          <button
            class="save-btn"
            (click)="nextBookingStep()"
            [disabled]="selectedService?.requiresEmployee && !selectedEmployee"
          >
            הבא
          </button>
          <button class="cancel-btn" (click)="closeBookingModal()">בטל</button>
        </div>
      </div>

      <!-- שלב 2: בחירת תאריך -->
      <div class="form-slide" [class.active]="bookingStep === 2">
        <div class="form-group">
          <label>שירות נבחר</label>
          <input type="text" [value]="selectedService?.name" disabled />
        </div>
        <div class="form-group">
          <label>בחר תאריך</label>
          <div class="calendar-nav">
            <button (click)="prevMonth()" class="nav-btn">קודם</button>
            <button (click)="nextMonth()" class="nav-btn">הבא</button>
          </div>
          <mwl-calendar-month-view
            [viewDate]="viewDate"
            [locale]="locale"
            [events]="events"
            (dayClicked)="onDateSelect($event.day.date)"
            [activeDayIsOpen]="false"
            [weekendDays]="[5, 6]"
            (beforeViewRender)="dayModifier($event)"
          ></mwl-calendar-month-view>
          <span class="error" *ngIf="!selectedDate">שדה נדרש</span>
        </div>
        <div class="form-actions">
          <button
            class="save-btn"
            (click)="nextBookingStep()"
            [disabled]="!selectedDate"
          >
            הבא
          </button>
          <button class="cancel-btn" (click)="previousBookingStep()">
            חזור
          </button>
          <button class="cancel-btn" (click)="closeBookingModal()">בטל</button>
        </div>
      </div>

      <!-- שלב 3: בחירת שעה -->
      <div class="form-slide" [class.active]="bookingStep === 3">
        <div class="form-group">
          <label>שירות נבחר</label>
          <input type="text" [value]="selectedService?.name" disabled />
        </div>
        <div class="form-group">
          <label>בחר שעה</label>
          <div class="time-bubbles">
            <button
              *ngFor="let time of availableTimes"
              (click)="selectTime(time)"
              [class.selected]="selectedTime === time"
              class="time-bubble"
            >
              {{ time }}
            </button>
          </div>
          <span class="error" *ngIf="!selectedTime">שדה נדרש</span>
        </div>
        <div class="form-actions">
          <button
            class="save-btn"
            (click)="nextBookingStep()"
            [disabled]="!selectedTime"
          >
            הבא
          </button>
          <button class="cancel-btn" (click)="previousBookingStep()">
            חזור
          </button>
          <button class="cancel-btn" (click)="closeBookingModal()">בטל</button>
        </div>
      </div>

      <!-- שלב 4: סיכום ואישור -->
      <div class="form-slide" [class.active]="bookingStep === 4">
        <div class="form-group">
          <label>שירות נבחר</label>
          <input type="text" [value]="selectedService?.name" disabled />
        </div>
        <div class="form-group" *ngIf="selectedEmployee">
          <label>עובד נבחר</label>
          <input type="text" [value]="selectedEmployee.name" disabled />
        </div>
        <div class="form-group">
          <label>תאריך ושעה</label>
          <input
            type="text"
            [value]="selectedDate | date : 'dd/MM/yyyy' + ' ' + selectedTime"
            disabled
          />
        </div>
        <div class="form-group">
          <label>הערות (אופציונלי)</label>
          <textarea
            [(ngModel)]="bookingNotes"
            placeholder="הוסף הערות"
          ></textarea>
        </div>
        <div class="form-actions">
          <button class="save-btn" (click)="confirmBooking()">אשר הזמנה</button>
          <button class="cancel-btn" (click)="previousBookingStep()">
            חזור
          </button>
          <button class="cancel-btn" (click)="closeBookingModal()">בטל</button>
        </div>
      </div>
    </div>
  </div>

  <!-- מודל לעריכת תיאור העסק -->
  <div
    class="modal description-modal"
    [class.active]="showDescriptionModal"
    (click)="closeDescriptionModal()"
  >
    <div
      class="modal-content"
      [class.active]="showDescriptionModal"
      (click)="$event.stopPropagation()"
    >
      <button class="close-modal-btn" (click)="closeDescriptionModal()">✕</button>
      <h3>📝 ערוך תיאור העסק</h3>
      
      <div class="form-group">
        <label>תיאור העסק</label>
        <textarea 
          [(ngModel)]="businessDescription"
          placeholder="כתוב תיאור מושך על העסק שלך..."
          rows="6"
        ></textarea>
        <p class="helper-text">תיאור זה יופיע בראש דף העסק ויעזור ללקוחות להכיר אותך טוב יותר</p>
      </div>

      <div class="form-actions">
        <button class="cancel-btn" (click)="closeDescriptionModal()">❌ בטל</button>
        <button 
          class="save-btn" 
          (click)="saveDescription()"
          [disabled]="!businessDescription || businessDescription.trim().length === 0"
        >
          💾 שמור תיאור
        </button>
      </div>
    </div>
  </div>

  <!-- מודל לעריכת פרטי העסק -->
  <div
    class="modal edit-business-modal"
    [class.active]="showEditBusinessModal"
    (click)="closeEditBusinessModal()"
  >
    <div
      class="modal-content"
      [class.active]="showEditBusinessModal"
      (click)="$event.stopPropagation()"
    >
      <button class="close-modal-btn" (click)="closeEditBusinessModal()">✕</button>
      <h3>🏢 ערוך פרטי עסק</h3>
      
      <!-- Logo Upload -->
      <div class="form-group">
        <label>לוגו העסק</label>
        <div class="image-upload-section">
          <div class="image-preview" *ngIf="logoImagePreview">
            <img [src]="logoImagePreview" alt="לוגו" />
          </div>
          <input
            #logoFileInput
            type="file"
            accept="image/*"
            (change)="onLogoFileSelected($event)"
            style="display: none;"
          />
          <button class="upload-btn" (click)="logoFileInput.click()">
            📷 העלה לוגו
          </button>
        </div>
      </div>

      <!-- Business Name -->
      <div class="form-group">
        <label>שם העסק *</label>
        <input
          type="text"
          [(ngModel)]="editBusinessForm.businessName"
          placeholder="שם העסק"
          required
        />
      </div>

      <!-- Address -->
      <div class="form-group">
        <label>כתובת *</label>
        <input
          type="text"
          [(ngModel)]="editBusinessForm.address"
          placeholder="רחוב, עיר"
          required
        />
      </div>

      <!-- Phone -->
      <div class="form-group">
        <label>טלפון *</label>
        <input
          type="tel"
          [(ngModel)]="editBusinessForm.phoneNumber"
          placeholder="050-1234567"
          required
        />
      </div>

      <!-- Appointment Interval -->
      <div class="form-group">
        <label>מרווח תורים (דקות)</label>
        <input
          type="number"
          [(ngModel)]="editBusinessForm.appointmentInterval"
          min="15"
          step="15"
        />
      </div>

      <!-- Opening Hours -->
      <div class="form-group">
        <label>שעות פתיחה</label>
        <div class="opening-hours-list">
          <div class="opening-hour-item" *ngFor="let hour of editBusinessForm.openingHours; let i = index">
            <select [(ngModel)]="hour.day">
              <option value="ראשון">ראשון</option>
              <option value="שני">שני</option>
              <option value="שלישי">שלישי</option>
              <option value="רביעי">רביעי</option>
              <option value="חמישי">חמישי</option>
              <option value="שישי">שישי</option>
              <option value="שבת">שבת</option>
            </select>
            <input type="time" [(ngModel)]="hour.from" />
            <span>עד</span>
            <input type="time" [(ngModel)]="hour.to" />
            <button class="remove-hour-btn" (click)="removeOpeningHour(i)">🗑️</button>
          </div>
          <button class="add-hour-btn" (click)="addOpeningHour()">➕ הוסף יום</button>
        </div>
      </div>

      <div class="form-actions">
        <button class="cancel-btn" (click)="closeEditBusinessModal()">❌ בטל</button>
        <button class="save-btn" (click)="saveBusinessDetails()">
          💾 שמור שינויים
        </button>
      </div>
    </div>
  </div>

  <!-- מודל ניהול חופשות -->
  <div
    class="modal active"
    *ngIf="showAbsenceModal"
    (click)="closeAbsenceModal()"
  >
    <div class="modal-content absence-modal" (click)="$event.stopPropagation()">
      <button class="close-modal-btn" (click)="closeAbsenceModal()">×</button>
      
      <h3>🏖️ ניהול חופשות - {{ newAbsence.employeeName }}</h3>
      
      <div class="form-group">
        <label>סוג היעדרות</label>
        <select [(ngModel)]="newAbsence.type">
          <option value="vacation">חופשה</option>
          <option value="sick">מחלה</option>
          <option value="personal">אישי</option>
          <option value="other">אחר</option>
        </select>
      </div>
      
      <div class="form-row">
        <div class="form-group">
          <label>תאריך התחלה</label>
          <input type="date" [(ngModel)]="newAbsence.startDate" />
        </div>
        
        <div class="form-group">
          <label>תאריך סיום</label>
          <input type="date" [(ngModel)]="newAbsence.endDate" />
        </div>
      </div>
      
      <div class="form-group">
        <label>הערות</label>
        <textarea [(ngModel)]="newAbsence.notes" placeholder="הערות נוספות..."></textarea>
      </div>
      
      <div class="form-actions">
        <button class="cancel-btn" (click)="closeAbsenceModal()">ביטול</button>
        <button class="save-btn" (click)="addAbsence()">💾 שמור חופשה</button>
      </div>
      
      <!-- רשימת חופשות קיימות -->
      <div class="absences-list" *ngIf="getEmployeeAbsences(newAbsence.employeeId).length > 0">
        <h4>חופשות קיימות:</h4>
        <div class="absence-card" *ngFor="let absence of getEmployeeAbsences(newAbsence.employeeId)">
          <div class="absence-header">
            <div class="absence-dates">
              📅 {{ absence.startDate }} - {{ absence.endDate }}
            </div>
            <div class="absence-type">
              <span [class]="'badge-' + absence.type">{{ getAbsenceTypeText(absence.type) }}</span>
            </div>
          </div>
          
          <div class="absence-body">
            <div class="absence-status">
              <span [class]="'status-badge status-' + absence.status">
                {{ getAbsenceStatusText(absence.status) }}
              </span>
            </div>
            
            <div class="absence-notes" *ngIf="absence.notes">
              💬 {{ absence.notes }}
            </div>
          </div>
          
          <div class="absence-actions">
            <button 
              *ngIf="absence.status === 'pending'" 
              class="approve-btn-small" 
              (click)="approveAbsence(absence)"
              title="אשר"
            >
              ✅
            </button>
            <button 
              *ngIf="absence.status === 'pending'" 
              class="reject-btn-small" 
              (click)="rejectAbsence(absence)"
              title="דחה"
            >
              ❌
            </button>
            <button 
              class="delete-btn-small" 
              (click)="deleteAbsence(absence.id!)"
              title="מחק"
            >
              🗑️
            </button>
          </div>
        </div>
      </div>
      
      <!-- בקשות ממתינות לאישור -->
      <div class="pending-absences" *ngIf="getPendingAbsences().length > 0">
        <h4>⏳ בקשות ממתינות לאישור:</h4>
        <div class="pending-card" *ngFor="let absence of getPendingAbsences()">
          <div class="pending-info">
            <strong>{{ absence.employeeName }}</strong>
            <span>{{ absence.startDate }} - {{ absence.endDate }}</span>
            <span class="type-badge">{{ getAbsenceTypeText(absence.type) }}</span>
          </div>
          <div class="pending-actions">
            <button class="approve-btn" (click)="approveAbsence(absence)">
              ✅ אשר
            </button>
            <button class="reject-btn" (click)="rejectAbsence(absence)">
              ❌ דחה
            </button>
          </div>
        </div>
      </div>
    </div>
  </div>
</section>
